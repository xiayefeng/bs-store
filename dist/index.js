function e(){for(var e=0,t=0,o=Reflect.ownKeys(sessionStorage);t<o.length;t++){var r=o[t];e+=sessionStorage.getItem(r).length}return console.log("sessionStorage used "+(e/1024).toFixed(2)+"kb"),e}function t(){for(var e=0,t=0,o=Reflect.ownKeys(localStorage);t<o.length;t++){var r=o[t];e+=localStorage.getItem(r).length}return console.log("localStorage used "+(e/1024).toFixed(2)+"kb"),e}var o=new(function(){function e(){}return e.prototype.getSession=function(e){if("string"!=typeof e)throw new Error("params must be string");var t=this.getItem(e);if(null===t)return console.log("no exist such "+e+" sessionStorage"),null;var o=null;try{o=JSON.parse(t),o=this.checkStr(o),o=this.checkNaN(o),o=this.checkBigInt(o)}catch(e){if(e.message.includes("JSON"))return t}return o},e.prototype.getLocal=function(e){if("string"!=typeof e)throw new Error("params must be string");var t=this.getItem(e,2);if(null===t)return console.log("no exist such "+e+" çš„localStorage"),null;var o=null;try{o=JSON.parse(t),o=this.checkStr(o),o=this.checkNaN(o),o=this.checkBigInt(o)}catch(e){if(e.message.includes("JSON"))return t}return o},e.prototype.setSession=function(e,t){this.setItem(e,t)},e.prototype.setLocal=function(e,t){this.setItem(e,t,2)},e.prototype.removeSession=function(e){this.removeItem(e)},e.prototype.removeLocal=function(e){this.removeItem(e,2)},e.prototype.removeAllSession=function(){this.removeAll()},e.prototype.removeAllLocal=function(){this.removeAll(2)},e.prototype.removeAllStorage=function(){this.removeAll(3)},e.prototype.getItem=function(e,t){void 0===t&&(t=1);var o=null;return 1===t?o=sessionStorage.getItem(e):2===t&&(o=localStorage.getItem(e)),o},e.prototype.setItem=function(e,t,o){if(void 0===o&&(o=1),"string"!=typeof e)throw new Error("Items key params must be string");if(void 0===t)throw new Error("set value is not defind");if("symbol"==typeof t)throw new Error("value is not support symbol");"object"==typeof t?t=JSON.stringify(t):"string"==typeof t?t=JSON.stringify({str:t,isString2Object:!0}):Number.isNaN(t)?t=JSON.stringify({num:null,isNaN2Object:!0}):"bigint"==typeof t&&(t=JSON.stringify({num:String(t),isBigInt2Object:!0})),1===o?sessionStorage.setItem(e,t):localStorage.setItem(e,t)},e.prototype.removeItem=function(e,t){if(void 0===t&&(t=1),"string"!=typeof e)throw new Error("Items key params must be string");1===t&&null!=sessionStorage.getItem(e)?sessionStorage.removeItem(e):2===t&&null!=localStorage.getItem(e)&&localStorage.removeItem(e)},e.prototype.removeAll=function(e){if(void 0===e&&(e=1),1===e)sessionStorage.clear();else if(2===e)localStorage.clear();else{if(3!==e)throw new Error("param error, param must be one of 1,2,3");sessionStorage.clear(),localStorage.clear()}},e.prototype.checkStr=function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isString2Object")&&t.isString2Object&&(t=t.str),t},e.prototype.checkNaN=function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isNaN2Object")&&(t=NaN),t},e.prototype.checkBigInt=function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isBigInt2Object")&&(t=BigInt(t.num)),t},e.prototype.checkedType=function(e){return Object.prototype.toString.call(e).slice(8,-1)},e}());export default o;export{t as getLocalSize,e as getSessionSize};
