"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}var bsStore=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"getSession",value:function(e){if("string"!=typeof e)throw new Error("params must be string");var t,r=this.getItem(e);if(null===r)return console.log("no exist such ".concat(e," sessionStorage")),null;try{t=JSON.parse(r),t=this.checkStr(t),t=this.checkNaN(t),t=this.checkBigInt(t)}catch(e){if(e.message.includes("JSON"))return r}return t}},{key:"getLocal",value:function(e){if("string"!=typeof e)throw new Error("params must be string");var t,r=this.getItem(e,2);if(null===r)return console.log("no exist such ".concat(e," 的localStorage")),null;try{t=JSON.parse(r),t=this.checkStr(t),t=this.checkNaN(t),t=this.checkBigInt(t)}catch(e){if(e.message.includes("JSON"))return r}return t}},{key:"setSession",value:function(e,t){this.setItem(e,t)}},{key:"setLocal",value:function(e,t){this.setItem(e,t,2)}},{key:"removeSession",value:function(e){this.removeItem(e)}},{key:"removeLocal",value:function(e){this.removeItem(e,2)}},{key:"removeAllSession",value:function(){this.removeAll()}},{key:"removeAllLocal",value:function(){this.removeAll(2)}},{key:"removeAllStorage",value:function(){this.removeAll(3)}},{key:"getItem",value:function(e,t){var r,o=1<arguments.length&&void 0!==t?t:1;return 1===o?r=sessionStorage.getItem(e):2===o&&(r=localStorage.getItem(e)),r}},{key:"setItem",value:function(e,t,r){var o=2<arguments.length&&void 0!==r?r:1;if("string"!=typeof e)throw new Error("Items key params must be string");if(void 0===t)throw new Error("set value is not defind");if("symbol"===_typeof(t))throw new Error("value is not support symbol");"object"===_typeof(t)?t=JSON.stringify(t):"string"==typeof t?t=JSON.stringify({str:t,isString2Object:!0}):Number.isNaN(t)?t=JSON.stringify({num:null,isNaN2Object:!0}):"bigint"==typeof t&&(t=JSON.stringify({num:String(t),isBigInt2Object:!0})),1===o?sessionStorage.setItem(e,t):localStorage.setItem(e,t)}},{key:"removeItem",value:function(e,t){var r=1<arguments.length&&void 0!==t?t:1;if("string"!=typeof e)throw new Error("Items key params must be string");1===r&&null!=sessionStorage.getItem(e)?sessionStorage.removeItem(e):2===r&&null!=localStorage.getItem(e)&&localStorage.removeItem(e)}},{key:"removeAll",value:function(e){var t=0<arguments.length&&void 0!==e?e:1;if(1===t)sessionStorage.clear();else if(2===t)localStorage.clear();else{if(3!==t)throw new Error("param error, param must be one of 1,2,3");sessionStorage.clear(),localStorage.clear()}}},{key:"checkStr",value:function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isString2Object")&&t.isString2Object&&(t=t.str),t}},{key:"checkNaN",value:function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isNaN2Object")&&(t=NaN),t}},{key:"checkBigInt",value:function(e){var t=e;return"Object"===this.checkedType(t)&&Reflect.has(t,"isBigInt2Object")&&(t=BigInt(t.num)),t}},{key:"checkedType",value:function(e){return Object.prototype.toString.call(e).slice(8,-1)}}],[{key:"checkBrows",value:function(){if(!window.sessionStorage||!window.localStorage)throw new Error("当前环境不支持本地存储")}}]),e}(),bsStore$1=new bsStore;module.exports=bsStore$1;
